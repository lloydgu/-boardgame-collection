<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y&Lçš„æ¡Œæ¸¸å®¤</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <!-- æ›¿æ¢åŸæœ‰æœç´¢æŒ‰é’® -->
        <div class="search-container">
            <div class="search-icon" @click="toggleSearch">ğŸ”</div>
            
            <transition name="search-slide">
                <div v-if="showSearch" class="inline-search">
                    <input
                        type="text"
                        v-model="searchText"
                        placeholder="æœç´¢..."
                        ref="searchInput"
                        class="inline-input"
                    >
                    <span class="close-icon" @click="toggleSearch">Ã—</span>
                </div>
            </transition>
        </div>
        <!-- åœ¨æœç´¢æ¡†ä¸‹æ–¹æ·»åŠ äººæ•°ç­›é€‰ -->
        <div class="filter-section">
            <input 
                type="number" 
                v-model.number="playerCount" 
                placeholder="ğŸ‘¥ å‡ ä¸ªäººç©" 
                min="1" 
                class="player-input"
            >
        </div>
        <!-- åˆ†ç±»æ ‡ç­¾ç­›é€‰åŒº -->
        <!-- ä¿®æ”¹åˆ†ç±»æ ‡ç­¾åŒºç»“æ„ -->
        <div class="category-filter">
            <div class="category-group" v-for="(_, category) in categoryMap">
                <h3 @click="toggleCategory(category)" class="category-header">
                    {{ categoryMap[category] }}
                    <span class="toggle-icon">{{ categoryStates[category] ? 'â–¼' : 'â–¶' }}</span>
                </h3>
                <transition name="slide">
                    <div v-show="categoryStates[category]" class="tags">
                        <span
                            v-for="tag in getCategoryTags(category)"
                            :key="tag"
                            class="tag"
                            :class="[
                                category,
                                { 'active': selectedCategoryTags[category].has(tag) }
                            ]"
                            @click="toggleCategoryTag(category, tag)"
                        >
                            {{ tag }}
                            <span class="tag-count">({{ getTagCount(category, tag) }})</span>
                        </span>
                    </div>
                </transition>
            </div>
        </div>
        <!-- å½“å‰ç­›é€‰çŠ¶æ€ -->
        <div class="active-filters">
            <div v-if="activeFilterCount > 0" class="active-tags">
                å½“å‰ç­›é€‰ï¼š
                <template v-for="category in Object.keys(categoryMap)">
                    <span
                        v-for="tag in selectedCategoryTags[category]"
                        :key="tag"
                        class="active-tag"
                        :class="category"
                        @click="toggleCategoryTag(category, tag)"
                    >
                        {{ categoryMap[category] }}: {{ tag }} Ã—
                    </span>
                </template>
            </div>
        </div>
        <!-- æ–°å¢ç­›é€‰æŒ‰é’® -->
        <div class="filter-control">
            <!-- ç­›é€‰æŒ‰é’® -->
            <button 
                class="filter-btn"
                :class="{ 'active': filtersApplied }"
                @click="applyFilters"
            >
                {{ filtersApplied ? 'å·²åº”ç”¨ç­›é€‰' : 'å¼€å§‹ç­›é€‰' }}
                <span class="badge" v-if="activeFilterCount > 0">
                    {{ activeFilterCount }}
                </span>
            </button>
        
        <!-- æ¸¸æˆåˆ—è¡¨ -->
        <div class="game-list">
            <template v-if="displayedGames.length > 0">
                <div 
                    v-for="game in displayedGames" 
                    class="game-card"
                >
            <div 
                v-for="game in filteredGames"
                class="game-card"
                :class="{ 'dimmed': !isGameVisible(game) }"
            >
                <img 
                    :src="game.å°é¢å›¾URL" 
                    :alt="game.åç§°" 
                    class="game-cover"
                >
                <div class="game-info">
                    <h3>{{ game.åç§° }}</h3>
                    <div class="meta">
                        <span>ğŸ‘¥ {{ game.äººæ•° }}</span>
                        <span>â³ {{ game.æ—¶é•¿ }}</span>
                        <span>ğŸ‹ï¸ {{ game.éš¾åº¦ }}</span>
                    </div>
                </div>
            </template>
            <div v-else-if="filtersApplied" class="empty-state">
                ğŸ•µï¸â™€ï¸ æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ¡Œæ¸¸
            </div>
        
            <!-- 3. åˆå§‹çŠ¶æ€æç¤º -->
            <div v-else class="empty-state">
                ğŸ² è®¾ç½®ç­›é€‰æ¡ä»¶åç‚¹å‡»"å¼€å§‹ç­›é€‰"
            </div>
        </div>
                    <!-- æ¸¸æˆæ ‡ç­¾å±•ç¤º -->
                    <div class="game-tags">
                        <template v-for="tag in game.æ ‡ç­¾">
                            <span
                                v-if="isCategoryTag(tag)"
                                class="tag"
                                :class="getTagCategory(tag)"
                                @click="toggleParsedTag(tag)"
                            >
                                {{ getTagName(tag) }}
                            </span>
                            <span
                                v-else
                                class="tag custom"
                                @click="toggleTag(tag)"
                            >
                                {{ tag }}
                            </span>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>