<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y&LÁöÑÊ°åÊ∏∏ÂÆ§</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <!-- ÊõøÊç¢ÂéüÊúâÊêúÁ¥¢ÊåâÈíÆ -->
        <div class="search-container">
            <div class="search-icon" @click="toggleSearch">üîç</div>
            
            <transition name="search-slide">
                <div v-if="showSearch" class="inline-search">
                    <input
                        type="text"
                        v-model="searchText"
                        placeholder="ÊêúÁ¥¢..."
                        ref="searchInput"
                        class="inline-input"
                    >
                    <span class="close-icon" @click="toggleSearch">√ó</span>
                </div>
            </transition>
        </div>
        <!-- Âú®ÊêúÁ¥¢Ê°Ü‰∏ãÊñπÊ∑ªÂä†‰∫∫Êï∞Á≠õÈÄâ -->
        <div class="player-filter-group">
            <input
                type="number"
                v-model.number="playerCount"
                placeholder="üë• Âá†‰∏™‰∫∫Áé©"
                min="1"
                class="player-input"
            >
            <div class="search-icon" @click="toggleSearch">üîç</div>
        </div>
    </div>
        <!-- ÂàÜÁ±ªÊ†áÁ≠æÁ≠õÈÄâÂå∫ -->
        <div class="category-filter">
            <div class="category-group" v-for="(_, category) in categoryMap">
                <h3>{{ categoryMap[category] }}</h3>
                <div class="tags">
                    <span
                        v-for="tag in getCategoryTags(category)"
                        :key="tag"
                        class="tag"
                        :class="[
                            category,
                            { 'active': selectedCategoryTags[category].has(tag) }
                        ]"
                        @click="toggleCategoryTag(category, tag)"
                    >
                        {{ tag }}
                        <span class="tag-count">({{ getTagCount(category, tag) }})</span>
                    </span>
                </div>
            </div>
        </div>

        <!-- ÂΩìÂâçÁ≠õÈÄâÁä∂ÊÄÅ -->
        <div class="active-filters">
            <div v-if="activeFilterCount > 0" class="active-tags">
                ÂΩìÂâçÁ≠õÈÄâÔºö
                <template v-for="category in Object.keys(categoryMap)">
                    <span
                        v-for="tag in selectedCategoryTags[category]"
                        :key="tag"
                        class="active-tag"
                        :class="category"
                        @click="toggleCategoryTag(category, tag)"
                    >
                        {{ categoryMap[category] }}: {{ tag }} √ó
                    </span>
                </template>
            </div>
        </div>

        <!-- Ê∏∏ÊàèÂàóË°® -->
        <div class="game-list">
            <div 
                v-for="game in filteredGames"
                class="game-card"
                :class="{ 'dimmed': !isGameVisible(game) }"
            >
                <img 
                    :src="game.Â∞ÅÈù¢ÂõæURL" 
                    :alt="game.ÂêçÁß∞" 
                    class="game-cover"
                >
                <div class="game-info">
                    <h3>{{ game.ÂêçÁß∞ }}</h3>
                    <div class="meta">
                        <span>üë• {{ game.‰∫∫Êï∞ }}</span>
                        <span>‚è≥ {{ game.Êó∂Èïø }}</span>
                        <span>üèãÔ∏è {{ game.ÈöæÂ∫¶ }}</span>
                    </div>
                    
                    <!-- Ê∏∏ÊàèÊ†áÁ≠æÂ±ïÁ§∫ -->
                    <div class="game-tags">
                        <template v-for="tag in game.Ê†áÁ≠æ">
                            <span
                                v-if="isCategoryTag(tag)"
                                class="tag"
                                :class="getTagCategory(tag)"
                                @click="toggleParsedTag(tag)"
                            >
                                {{ getTagName(tag) }}
                            </span>
                            <span
                                v-else
                                class="tag custom"
                                @click="toggleTag(tag)"
                            >
                                {{ tag }}
                            </span>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>