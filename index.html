<!DOCTYPE html>

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y&LÁöÑÊ°åÊ∏∏ÂÆ§</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- ÊõøÊç¢ÂéüÊúâÊêúÁ¥¢ÊåâÈíÆ -->
        <div class="search-container">
            <div class="search-icon" @click="toggleSearch">üîç</div>
            
            <transition name="search-slide">
                <div v-if="showSearch" class="inline-search">
                    <input
                        type="text"
                        v-model="searchText"
                        placeholder="ÊêúÁ¥¢..."
                        ref="searchInput"
                        class="inline-input"
                    >
                    <span class="close-icon" @click="toggleSearch">√ó</span>
                </div>
            </transition>
        </div>
        <!-- Êñ∞Â¢ûÂÜÖÂÆπÂÆπÂô®ÂåÖË£πÂÖ∂‰ªñÂÜÖÂÆπ -->
        <div class="content-container">
            <div class="filter-section">
                <div class="player-input-container">
                    <img 
                    src="image/‰∏âÂú∞Èº†.png" 
                    alt="‰∏âÂú∞Èº†ÂõæÊ†á" 
                    class="input-icon"
                    >
                    <input 
                        type="number" 
                        v-model.number="playerCount" 
                        placeholder="‰ªäÂ§©Âá†Âè™Ôºü"
                        min="1" 
                        class="player-input"
                    >
                </div>
            </div>
            <!-- ÂàÜÁ±ªÊ†áÁ≠æÁ≠õÈÄâÂå∫ -->
            <!-- ‰øÆÊîπÂàÜÁ±ªÊ†áÁ≠æÂå∫ÁªìÊûÑ -->
            <div class="category-filter">
                <div class="category-group" v-for="(_, category) in categoryMap">
                    <h3 @click="toggleCategory(category)" class="category-header">
                        <span v-html="categoryMap[category]"></span>
                        <span class="toggle-icon">
                            <i v-if="categoryStates[category]" class="fas fa-chevron-down"></i>
                            <i v-else class="fas fa-chevron-right"></i>
                          </span>
                    </h3>
                    <transition name="slide">
                        <div v-show="categoryStates[category]" class="tags">
                            <span
                                v-for="tag in getCategoryTags(category)"
                                :key="tag"
                                class="tag"
                                :class="[
                                    category,
                                    { 'active': selectedCategoryTags[category].has(tag) }
                                ]"
                                @click="toggleCategoryTag(category, tag)"
                            >
                                {{ tag }}
                            
                            </span>
                        </div>
                    </transition>
                </div>
            </div>
            <!-- ÂΩìÂâçÁ≠õÈÄâÁä∂ÊÄÅ -->
            <div class="active-filters">
                <div v-if="activeFilterCount > 0" class="active-tags">
                  <template v-for="(tags, category) in selectedCategoryTags">
                    <span
                      v-for="tag in tags"
                      :key="tag"
                      class="active-tag"
                      :class="category"
                      @click="toggleCategoryTag(category, tag)"
                    >

                      <!-- ÊòæÁ§∫Ê†áÁ≠æÂêç -->
                      <span class="tag-name">{{ tag }}</span> √ó
                    </span>
                  </template>
                </div>
            </div>
            <div class="filter-actions">
                <button 
                class="apply-filter-btn"
                @click="applyFilters"
                :class="{ 'active': filtersApplied }"
            >
                <img src="image/ÂèØËææÈ∏≠.png" class="category-icon">
                <span v-if="potentialGameCount > 0" class="count-badge">
                    {{ potentialGameCount }}
                </span>
                </button>
                <button 
                class="sort-btn"
                @click="toggleSortOrder"
              >
                {{ sortOrderLabel }}
                <img 
                src="image/ËÉñ‰∏Å.png" 
                class="sort-icon"
                :class="{ reversed: sortOrder === 'desc' }"
                alt="ÊéíÂ∫èÂõæÊ†á"
              >
              </button>
            </div>
            <!-- Ê∏∏ÊàèÂàóË°® -->
            <div class="game-list" v-if="hasAppliedFilters">
                <div 
                    v-for="game in sortedGames"
                    class="game-card"
                >
                <div class="cover-container">
                    <img 
                        :src="game.Â∞ÅÈù¢ÂõæURL" 
                        :alt="game.ÂêçÁß∞" 
                        class="game-cover"
                    >
                    <button 
                        class="favorite-button"
                        :class="{ active: favoriteGameIds.includes(game.ÂêçÁß∞) }"
                        @click.stop="toggleFavorite(game)"
                    >
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                    
                    <div class="game-info">
                        <h3>{{ game.ÂêçÁß∞ }}</h3>
                        <div class="meta">
                            <span>  <i class="material-icons">people</i> {{ game.‰∫∫Êï∞ }}</span>
                            <span>  <i class="material-icons">timer</i> {{ game.Êó∂Èïø }}</span>
                            <span>  <i class="material-icons">scale</i> {{ game.ÈöæÂ∫¶ }}</span>
                        </div>
                        
                        <!-- Ê∏∏ÊàèÊ†áÁ≠æÂ±ïÁ§∫ -->
                        <div class="game-tags">
                            <template v-for="tag in game.Ê†áÁ≠æ">
                                <span
                                    v-if="isCategoryTag(tag)"
                                    class="tag"
                                    :class="getTagCategory(tag)"
                                    @click="toggleParsedTag(tag)"
                                >
                                    {{ getTagName(tag) }}
                                </span>
                                <span
                                    v-else
                                    class="tag custom"
                                    @click="toggleTag(tag)"
                                >
                                    {{ tag }}
                                </span>
                            </template>
                        </div>
                    </div>

                </div>
                    
            </div>
            <!-- Êñ∞Â¢ûÊÇ¨ÊµÆÊåâÈíÆÔºàÂõ∫ÂÆöÂú®Âè≥‰∏ãËßíÔºâ -->
            <div class="favorite-button-container" @click.stop="showFavorites">
                <button class="favorite-button-folder">
                    <img src="image/ÂêâÂà©Ëõã.png" class="favorite-button-folder-icon">
                </button>
              </div>
            <!-- Êî∂ËóèÊµÆÁ™ó -->
            <div class="favorite-modal" v-if="isFavoriteModalActive" @click.stop="hideFavorites">
                <div class="favorite-list">
                  <h2>ÊàëÁöÑÊî∂Ëóè</h2>
                  <div v-if="favorites.length === 0" class="no-favorites">
                    ËøòÊ≤°ÊúâÊî∂Ëóè‰ªª‰ΩïÊ∏∏ÊàèÔºåÂø´ÂéªÂèëÁé∞ÂñúÊ¨¢ÁöÑÂêßÔºÅ
                  </div>
                  <div v-else class="favorites-grid">
                    <div 
                      class="favorite-item"
                      v-for="game in favorites"
                      :key="game.ÂêçÁß∞"
                      @click="selectFavoriteGame(game)"
                    >
                      <i class="fas fa-bookmark favorite-icon"></i>
                      <span class="favorite-title">{{ game.ÂêçÁß∞ }}</span>
                    </div>
                  </div>
                </div>
              </div>
            <div v-else class="empty-state">
                ÊÉ≥Áé©‰ªÄ‰πàÔºüËÆ©ÂèØËææÈ∏≠Â∏Æ‰Ω†ÊâæÊâæÔºÅ
            </div>
        <!-- Âú®ÊêúÁ¥¢Ê°Ü‰∏ãÊñπÊ∑ªÂä†‰∫∫Êï∞Á≠õÈÄâ -->
        <script src="app.js"></script>
        </div>

    </div>
    
</body>
</html>