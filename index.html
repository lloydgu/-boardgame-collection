<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ê°åÊ∏∏Êî∂ËóèÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
        <div v-if="isLoading" class="loading">
            <div class="spinner"></div>
            Ê≠£Âú®Âä†ËΩΩÊï∞ÊçÆ...
        </div>

        <!-- ÈîôËØØÊèêÁ§∫ -->
        <div v-if="error" class="error">
            {{ error }}
        </div>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <div v-if="!isLoading && !error">
            <!-- ÊêúÁ¥¢Âíå‰∫∫Êï∞Á≠õÈÄâ -->
            <div class="search-section">
                <input 
                    type="text" 
                    v-model="searchText" 
                    placeholder="üîç ÊêúÁ¥¢ÂêçÁß∞ÊàñÊ†áÁ≠æ..."
                    class="search-input"
                >
                <input
                    type="number"
                    v-model.number="playerCount"
                    placeholder="üë• ËæìÂÖ•‰∫∫Êï∞Á≠õÈÄâ"
                    min="1"
                    class="player-input"
                >
            </div>

            <!-- ÂàÜÁ±ªÁ≠õÈÄâÂå∫ -->
            <div class="category-filter">
                <div class="category-group" v-for="(name, key) in categoryMap" :key="key">
                    <h3>{{ name }}</h3>
                    <div class="tags">
                        <span
                            v-for="tag in getCategoryTags(key)"
                            :key="tag"
                            class="tag"
                            :class="[key, { 'active': selectedCategoryTags[key].has(tag) }]"
                            @click="toggleCategoryTag(key, tag)"
                        >
                            {{ tag }} ({{ getTagCount(key, tag) }})
                        </span>
                    </div>
                </div>
            </div>

            <!-- ÂΩìÂâçÁ≠õÈÄâÁä∂ÊÄÅ -->
            <div class="active-filters">
                <div v-if="activeFilterCount > 0" class="active-tags">
                    ÂΩìÂâçÁ≠õÈÄâÊù°‰ª∂Ôºö
                    <template v-for="category in Object.keys(categoryMap)">
                        <span
                            v-for="tag in selectedCategoryTags[category]"
                            :key="tag"
                            class="active-tag"
                            :class="category"
                            @click="toggleCategoryTag(category, tag)"
                        >
                            {{ categoryMap[category] }}: {{ tag }} √ó
                        </span>
                    </template>
                    <span 
                        v-for="tag in selectedTags"
                        class="active-tag custom"
                        @click="toggleTag(tag)"
                    >
                        {{ tag }} √ó
                    </span>
                </div>
            </div>

            <!-- Ê∏∏ÊàèÂàóË°® -->
            <div class="game-list">
                <div 
                    v-for="game in filteredGames"
                    class="game-card"
                    :class="{ 'dimmed': !isGameVisible(game) }"
                >
                    <img 
                        :src="game.Â∞ÅÈù¢ÂõæURL" 
                        :alt="game.ÂêçÁß∞" 
                        class="game-cover"
                    >
                    <div class="game-info">
                        <h3>{{ game.ÂêçÁß∞ }}</h3>
                        <div class="meta">
                            <span>üë• {{ game.‰∫∫Êï∞ }}</span>
                            <span>‚è≥ {{ game.Êó∂Èïø }}</span>
                            <span>‚≠ê {{ game.ÈöæÂ∫¶ }}</span>
                        </div>
                        
                        <!-- Ê∏∏ÊàèÊ†áÁ≠æÂ±ïÁ§∫ -->
                        <div class="game-tags">
                            <template v-for="tag in game.Ê†áÁ≠æ">
                                <span
                                    v-if="isCategoryTag(tag)"
                                    class="tag"
                                    :class="getTagCategory(tag)"
                                    @click="toggleParsedTag(tag)"
                                >
                                    {{ getTagName(tag) }}
                                </span>
                                <span
                                    v-else
                                    class="tag custom"
                                    @click="toggleTag(tag)"
                                >
                                    {{ tag }}
                                </span>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>